function initializeBoard(e,t,l=0){const o=new Array(e).fill(!1),i=new Array(t).fill(o).map((e=>e.map((()=>{let e=100*Math.random();return l>e}))));return i}function getCellValue(e,t,l){const o=l[0].length,i=l.length,r=(e%o+o)%o;return l[(t%i+i)%i][r]}function getAliveNeighborsCount(e,t,l){let o=0;return[[e-1,t-1],[e-1,t],[e-1,t+1],[e,t-1],[e,t+1],[e+1,t-1],[e+1,t],[e+1,t+1]].forEach((e=>{let[t,i]=e;o+=+getCellValue(t,i,l)})),o}function nextGeneration(e){const t=e[0].length,l=e.length,o=initializeBoard(t,l);for(let i=0;i<l;i++)for(let l=0;l<t;l++){let t=getAliveNeighborsCount(l,i,e),r=getCellValue(l,i,e);(2===t&&r||3===t)&&(o[i][l]=!0)}return o}const tiles=document.querySelector(".tiles");let pseudoTileSize=document.body.clientWidth<=768&&document.body.clientHeight<=1024?30:45,columns=Math.floor(document.body.clientWidth/pseudoTileSize),rows=Math.floor((document.body.clientHeight-60)/pseudoTileSize),board=initializeBoard(columns,rows,20);const createTile=(e,t,l)=>{const o=document.createElement("div");return o.classList.add("tile"),o.classList.add("tile__dead"),o.setAttribute("x",e%l),o.setAttribute("y",Math.floor(e/l)),o.addEventListener("click",(e=>{let t=e.target.getAttribute("x"),l=e.target.getAttribute("y");console.log(`(${t}, ${l})`);let i=getCellValue(t,l,board);board[l][t]=!i,!0===i?(o.classList.remove("tile__alive"),o.classList.add("tile__dead")):(o.classList.remove("tile__dead"),o.classList.add("tile__alive"))})),o},createTiles=(e,t)=>{Array.from(Array(e*t)).map(((e,l)=>{tiles.appendChild(createTile(l,0,t))}))},createGrid=()=>{tiles.innerHTML="",columns=Math.floor(document.body.clientWidth/pseudoTileSize),rows=Math.floor(document.body.clientHeight/pseudoTileSize),tiles.style.setProperty("--columns",columns),tiles.style.setProperty("--rows",rows),createTiles(rows,columns)};createGrid();const renderBoard=()=>{for(let e=0;e<columns;e++)for(let t=0;t<rows;t++){let l=getCellValue(e,t,board),o=document.querySelector(`.tile[x="${e}"][y="${t}"]`);l?(o.classList.remove("tile__dead"),o.classList.add("tile__alive")):(o.classList.remove("tile__alive"),o.classList.add("tile__dead"))}};window.onresize=()=>{pseudoTileSize=document.body.clientWidth<=768&&document.body.clientHeight<=1024?30:45,columns=Math.floor(document.body.clientWidth/pseudoTileSize),rows=Math.floor((document.body.clientHeight-60)/pseudoTileSize),createGrid(),board=initializeBoard(columns,rows,20),renderBoard()},window.onload=()=>{let e=!1,t=document.querySelector("#pause");t.addEventListener("click",(()=>{e=!e,t.innerHTML=e?"Resume":"Pause",l.disabled=!e}));let l=document.querySelector("#next");l.disabled=!0,l.addEventListener("click",(()=>{e&&(board=nextGeneration(board),renderBoard())})),document.querySelector("#reset").addEventListener("click",(()=>{board=initializeBoard(columns,rows,20),renderBoard()})),document.querySelector("#clear").addEventListener("click",(()=>{board=initializeBoard(columns,rows,0),renderBoard()})),setInterval((()=>{document.hidden||e||(board=nextGeneration(board),renderBoard())}),300)};const smoothScroll=e=>{e.preventDefault();let t="#"+e.target.href.split("#")[1];document.querySelector(t).scrollIntoView({behavior:"smooth"})},toggleContent=()=>{let e=document.querySelectorAll(".hide-toggle__visible"),t=document.querySelectorAll(".hide-toggle__hidden");for(let t of e)t.classList.remove("hide-toggle__visible"),t.classList.add("hide-toggle__hidden");for(let e of t)e.classList.remove("hide-toggle__hidden"),e.classList.add("hide-toggle__visible");document.querySelectorAll("header").forEach((e=>{let t=window.getComputedStyle(e).display;"none"===t?e.style.display="flex":"flex"===t&&(e.style.display="none")}));let l=document.querySelector(".tiles"),o=window.getComputedStyle(l).zIndex;l.style.zIndex=-1*o};
